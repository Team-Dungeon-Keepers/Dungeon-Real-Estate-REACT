(this["webpackJsonpdungeon-site-react"]=this["webpackJsonpdungeon-site-react"]||[]).push([[0],{21:function(e,t,r){},221:function(e,t,r){"use strict";r.r(t);var s=r(1),n=r.n(s),c=r(36),a=r.n(c),i=(r(96),r(5)),o=(r(97),r(7)),j=r(4),d=(r(21),r(15)),b=r.n(d),l=function(){var e=localStorage.getItem("token");return b.a.create({headers:{authorization:JSON.parse(e)},baseURL:"https://dungeon-site-api.herokuapp.com/api"})},u=l,h=function(){return"1"===localStorage.getItem("userRole")},O=r(0),m=function(){return Object(O.jsxs)("div",{id:"nav-bar",children:[Object(O.jsx)(o.b,{to:"/",children:Object(O.jsx)("button",{type:"Button",onClick:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("userID"),window.localStorage.removeItem("userRole")},children:"Logout"})}),Object(O.jsx)(o.b,{to:"/profile",children:Object(O.jsx)("button",{type:"Button",children:"Profile"})}),Object(O.jsx)(o.b,{to:"/dashboard",children:Object(O.jsx)("button",{type:"button",children:"Dashboard"})}),Object(O.jsx)(o.b,{to:"/addreimb",children:Object(O.jsx)("button",{type:"button",children:"New Reimbursement"})}),Object(O.jsx)(o.b,{to:"/pendingreimb",children:Object(O.jsx)("button",{type:"button",children:"Approve/Deny"})}),Object(O.jsx)(o.b,{to:"/userview",children:Object(O.jsx)("button",{type:"button",children:"View Users"})})]})};var p=function(e){var t=Object(s.useState)(null),r=Object(i.a)(t,2),n=(r[0],r[1]),c=e.trigger,a=(e.setTrigger,Object(j.g)(),Object(j.h)().userID);return Object(s.useEffect)((function(){null!=a&&h()||(a=localStorage.getItem("userID")),u().get("https://dungeon-site-api.herokuapp.com/api/reimb/user/".concat(a)).then((function(e){return n(e.data)}))}),[c]),Object(O.jsxs)("div",{children:[Object(O.jsx)(m,{}),Object(O.jsx)("h2",{children:"My Reimbursements"}),Object(O.jsx)("div",{className:"tablecontainer",children:Object(O.jsx)("table",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Reimb ID"}),Object(O.jsx)("th",{children:"Description"}),Object(O.jsx)("th",{children:"Amount"}),Object(O.jsx)("th",{children:"Type"}),Object(O.jsx)("th",{children:"Status"}),Object(O.jsx)("th",{children:"Author"}),Object(O.jsx)("th",{children:"Resolved By"}),Object(O.jsx)("th",{children:"Submitted"}),Object(O.jsx)("th",{children:"Resolved"})]})})})]})},g=r(9),x=r(2),f=r(6),S=f.a().shape({username:f.c().required("username is required").min(3,"username must be at least three characters"),password:f.c().required("password is required"),confirmPassword:f.c().required("password confirmation is required")}),w=f.a().shape({username:f.c().required("username is required").min(3,"username must be at least three characters"),password:f.c().required("password is required")}),v=f.a().shape({username:f.c().required("username is required").min(3,"username must be at least three characters"),password:f.c().required("password is required"),confirmPassword:f.c().required("password confirmation is required"),USER_FIRST_NAME:f.c(),USER_LAST_NAME:f.c(),USER_EMAIL:f.c()});var E=function(e){var t=Object(s.useState)(!0),r=Object(i.a)(t,2),n=r[0],c=r[1],a=Object(s.useState)({username:"",password:""}),o=Object(i.a)(a,2),d=o[0],l=o[1],u=Object(s.useState)({}),h=Object(i.a)(u,2),m=h[0],p=h[1],S=Object(j.g)(),v=function(e){var t=e.target,r=t.name,s=t.type,n=t.value,a=t.checked,i="checkbox"===s?a:n;l(Object(x.a)(Object(x.a)({},d),{},Object(g.a)({},r,i))),function(e,t){f.b(w,e).validate(t).then((function(){p(Object(x.a)(Object(x.a)({},m),{},Object(g.a)({},e,"")))})).catch((function(t){t.errors&&p(Object(x.a)(Object(x.a)({},m),{},Object(g.a)({},e,t.errors[0])))})),w.isValid(d).then((function(e){c(!e)}))}(r,i)};return Object(O.jsx)("div",{id:"loginFormContainer",children:Object(O.jsxs)("div",{id:"form-login",className:"form form-login",children:[Object(O.jsxs)("div",{id:"loginRow1",children:[Object(O.jsx)("span",{id:"dungeonSite",children:"Dungeon Site"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{id:"loginSpan",children:"Login"})]}),Object(O.jsxs)("div",{id:"loginRow2",children:[Object(O.jsx)("div",{id:"error-login",className:"error error-login",children:m.username}),Object(O.jsx)("div",{id:"error-username",className:"error error-username"}),Object(O.jsx)("span",{children:"UserName"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{id:"username",name:"username",type:"text",onChange:v,value:d.username}),Object(O.jsx)("div",{id:"error-password",className:"error error-password",children:m.password}),Object(O.jsx)("span",{children:"Password"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{id:"password",name:"password",type:"password",onChange:v,value:d.password})]}),Object(O.jsxs)("div",{id:"loginRow3",children:[Object(O.jsx)("button",{id:"button-login",className:"btn btn-login",disabled:n,onClick:function(){!function(e){var t={username:e.username,password:e.password};b.a.post("https://dungeon-site-api.herokuapp.com/api/auth/login",t).then((function(e){var t=e.data.token,r=e.data.user;localStorage.setItem("token",'"'.concat(t,'"')),localStorage.setItem("userID","".concat(r.userID)),S.push("/dashboard")})).catch((function(e){console.log({err:e}),alert(e.response.data.message)}))}(d)},children:"GO!"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{children:"New To Dungeon Site?"}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{onClick:function(){S.push("/register")},children:"Register Here"}),e.children]})]})})},R=r(24),_="FETCH_START",I="FETCH_SUCCESS",N="FETCH_FAIL",T="EDIT_CLASS",U="DELETE_CLASS",A="ADD_CLASS",y="ADD_USER";var D=Object(R.b)(null,{createUser:function(e){return{type:y,payload:e}}})((function(e){var t=Object(s.useState)(!0),r=Object(i.a)(t,2),n=(r[0],r[1]),c=Object(s.useState)({username:"",password:"",confirmPassword:""}),a=Object(i.a)(c,2),o=a[0],d=a[1],l=Object(s.useState)({}),u=Object(i.a)(l,2),h=u[0],p=u[1],w=Object(j.g)(),v=function(e){var t=e.target,r=t.name,s=t.type,c=t.value,a=t.checked,i="checkbox"===s?a:c;d(Object(x.a)(Object(x.a)({},o),{},Object(g.a)({},r,i))),function(e,t){f.b(S,e).validate(t).then((function(){p(Object(x.a)(Object(x.a)({},h),{},Object(g.a)({},e,"")))})).catch((function(t){t.errors&&p(Object(x.a)(Object(x.a)({},h),{},Object(g.a)({},e,t.errors[0])))})),S.isValid(o).then((function(e){return n(!e)}))}(r,i)};return Object(O.jsxs)("div",{children:[Object(O.jsx)(m,{}),Object(O.jsxs)("div",{id:"form-register",className:"form form-register",children:[Object(O.jsx)("h1",{children:"Register Form"}),Object(O.jsx)("div",{id:"error-register",className:"error error-register"}),Object(O.jsx)("div",{id:"error-username",className:"error error-username",children:h.username}),Object(O.jsxs)("label",{id:"label-username",htmlFor:"username",children:["Username",Object(O.jsx)("input",{id:"username",name:"username",type:"text",onChange:v,value:o.username})]}),Object(O.jsx)("div",{id:"error-password",className:"error error-password",children:h.password}),Object(O.jsxs)("label",{id:"label-password",htmlFor:"password",children:["Password",Object(O.jsx)("input",{id:"password",name:"password",type:"password",onChange:v,value:o.password})]}),Object(O.jsx)("div",{id:"error-confirm-password",className:"error error-confirm-password",children:h.confirmPassword}),Object(O.jsxs)("label",{id:"label-confirm-password",htmlFor:"confirmPassword",children:["Confirm Password",Object(O.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",onChange:v,value:o.confirmPassword})]}),Object(O.jsx)("button",{id:"button-register",className:"btn btn-register",onClick:function(){!function(e){var t={username:e.username,password:e.password};b.a.post("https://dungeon-site-api.herokuapp.com/api/auth/register",t).then((function(e){w.push("/login")})).catch((function(e){console.log({err:e})}))}(o)},children:"Register"}),Object(O.jsx)("button",{id:"button-nav-login",className:"btn nav-btn nav-login",onClick:function(){w.push("/login")},children:"Login"}),e.children]})]})})),k=r(91),C=["component"],F=function(e){var t=e.component,r=Object(k.a)(e,C);return Object(O.jsx)(j.b,Object(x.a)(Object(x.a)({},r),{},{render:function(e){return localStorage.getItem("token")?Object(O.jsx)(t,Object(x.a)({},e)):Object(O.jsx)(j.a,{to:"/login"})}}))},P=r(52),L=r.n(P),M=r(88);var q=Object(R.b)(null,null)((function(e){var t=Object(s.useState)(!0),r=Object(i.a)(t,2),n=(r[0],r[1]),c=Object(s.useState)({username:"",password:"",confirmPassword:""}),a=Object(i.a)(c,2),o=a[0],d=a[1],l=Object(s.useState)({}),p=Object(i.a)(l,2),S=p[0],w=p[1],E=Object(j.g)(),R=e.trigger,_=(e.setTrigger,Object(j.h)().userID),I=function(){var e=Object(M.a)(L.a.mark((function e(t){var r,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),null==_&&(_=localStorage.getItem("userID")),s={ERS_USER_ID:_,ERS_USERNAME:t.username,ERS_PASSWORD:t.password,USER_FIRST_NAME:t.USER_FIRST_NAME,USER_LAST_NAME:t.USER_LAST_NAME,USER_EMAIL:t.USER_EMAIL},e.next=5,b()({method:"PUT",url:"https://dungeon-site-api.herokuapp.com//api/users/".concat(s.ERS_USER_ID),data:s,headers:{authorization:JSON.parse(r)}}).then((function(e){E.push("/dashboard")})).catch((function(e){console.log({err:e})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=e.target,r=t.name,s=t.type,c=t.value,a=t.checked,i="checkbox"===s?a:c;d(Object(x.a)(Object(x.a)({},o),{},Object(g.a)({},r,i))),function(e,t){f.b(v,e).validate(t).then((function(){w(Object(x.a)(Object(x.a)({},S),{},Object(g.a)({},e,"")))})).catch((function(t){t.errors&&w(Object(x.a)(Object(x.a)({},S),{},Object(g.a)({},e,t.errors[0])))})),v.isValid(o).then((function(e){return n(!e)}))}(r,i)};return Object(s.useEffect)((function(){null!=_&&h()||(_=localStorage.getItem("userID")),u().get("/users/".concat(_)).then((function(e){e.ERS_PASSWORD="",d(e.data)}))}),[R]),Object(O.jsxs)("div",{children:[Object(O.jsx)(m,{}),Object(O.jsxs)("div",{id:"form-profile",className:"form form-profile",children:[Object(O.jsx)("h1",{children:"Edit Profile"}),Object(O.jsx)("div",{id:"error-register",className:"error error-register"}),Object(O.jsx)("div",{id:"error-username",className:"error error-username",children:S.username}),Object(O.jsxs)("label",{id:"label-username",htmlFor:"username",children:["Username",Object(O.jsx)("input",{id:"username",name:"username",type:"text",onChange:N,value:o.ERS_USERNAME})]}),Object(O.jsx)("div",{id:"error-password",className:"error error-password",children:S.password}),Object(O.jsxs)("label",{id:"label-password",htmlFor:"password",children:["Password",Object(O.jsx)("input",{id:"password",name:"password",type:"password",onChange:N})]}),Object(O.jsx)("div",{id:"error-confirm-password",className:"error error-confirm-password",children:S.confirmPassword}),Object(O.jsxs)("label",{id:"label-confirm-password",htmlFor:"confirmPassword",children:["Confirm Password",Object(O.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",onChange:N,value:o.confirmPassword})]}),Object(O.jsxs)("label",{id:"label-first-name",htmlFor:"firstName",children:["First Name",Object(O.jsx)("input",{id:"confirmPassword",name:"USER_FIRST_NAME",type:"text",onChange:N,value:o.USER_FIRST_NAME})]}),Object(O.jsxs)("label",{id:"label-last-name",htmlFor:"lastName",children:["Last Name",Object(O.jsx)("input",{id:"confirmPassword",name:"USER_LAST_NAME",type:"text",onChange:N,value:o.USER_LAST_NAME})]}),Object(O.jsxs)("label",{id:"label-email",htmlFor:"email",children:["Email",Object(O.jsx)("input",{id:"confirmPassword",name:"USER_EMAIL",type:"text",onChange:N,value:o.USER_EMAIL})]}),Object(O.jsx)("button",{id:"button-register",className:"btn btn-register",onClick:function(){I(o)},children:"Update"}),e.children]})]})})),V=r(89);function B(e){var t=e.el,r=(e.trigger,e.setTrigger,Object(j.g)());return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.ERS_USER_ID}),Object(O.jsx)("td",{children:t.ERS_USERNAME}),Object(O.jsx)("td",{children:t.USER_FIRST_NAME}),Object(O.jsx)("td",{children:t.USER_LAST_NAME}),Object(O.jsx)("td",{children:t.USER_EMAIL}),Object(O.jsx)("td",{children:Object(V.RoleToString)(t.USER_ROLE_ID)}),h()&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){r.push("/userview/".concat(t.ERS_USER_ID))},children:"Edit"}),Object(O.jsx)("button",{onClick:function(){r.push("/dashboard/".concat(t.ERS_USER_ID))},children:"View Tickets"})]})]})}var H=function(e){var t=Object(s.useState)(null),r=Object(i.a)(t,2),n=r[0],c=r[1],a=e.trigger,o=e.setTrigger,d=Object(j.g)();return Object(s.useEffect)((function(){h()?u().get("https://dungeon-site-api.herokuapp.com/api/users").then((function(e){return c(e.data)})):d.push("/dashboard")}),[a]),Object(O.jsxs)("div",{children:[Object(O.jsx)(m,{}),Object(O.jsx)("h2",{className:"h-42",children:"All Users"}),Object(O.jsx)("div",{className:"tablecontainer",children:Object(O.jsxs)("table",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{class:"th-long",children:"User ID"}),Object(O.jsx)("th",{children:"Username"}),Object(O.jsx)("th",{children:"First Name"}),Object(O.jsx)("th",{children:"Last Name"}),Object(O.jsx)("th",{children:"Email"}),Object(O.jsx)("th",{children:"Role"})]}),n&&n.map((function(e){return Object(O.jsx)(B,{el:e,trigger:a,setTrigger:o},e.ERS_USER_ID)}))]})})]})};var J=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),r=t[0],n=t[1];return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(o.a,{children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(F,{path:"/dashboard/:userID",children:Object(O.jsx)(p,{trigger:r,setTrigger:n})}),Object(O.jsx)(F,{path:"/dashboard",children:Object(O.jsx)(p,{trigger:r,setTrigger:n})}),Object(O.jsx)(j.b,{path:"/login",children:Object(O.jsx)(E,{})}),Object(O.jsx)(j.b,{path:"/register",component:D}),Object(O.jsx)(F,{path:"/userview/:userID",children:Object(O.jsx)(q,{trigger:r,setTrigger:n})}),Object(O.jsx)(F,{path:"/profile/:userID",children:Object(O.jsx)(q,{trigger:r,setTrigger:n})}),Object(O.jsx)(F,{path:"/profile",children:Object(O.jsx)(q,{trigger:r,setTrigger:n})}),Object(O.jsx)(F,{path:"/userview",children:Object(O.jsx)(H,{trigger:r,setTrigger:n})}),Object(O.jsx)(j.b,{exact:!0,path:"/",component:E})]})})})},z=r(39),W=r(90),X=r(12),G={user:{username:"",password:"",role:"",skip:!1},classes:[],isFetching:!1,error:""},K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.b,Q=Object(z.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(x.a)(Object(x.a)({},e),{},{isFetching:!0});case I:return Object(x.a)(Object(x.a)({},e),{},{classes:t.payload,isFetching:!1});case N:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload,isFetching:!1});case T:var r=e.item.find((function(e){return e.id===t.payload}));return Object(x.a)(Object(x.a)({},e),{},{classes:r});case U:var s=e.classes.filter((function(e){return t.payload!==e.id}));return Object(x.a)(Object(x.a)({},e),{},{classes:s});case A:return Object(x.a)(Object(x.a)({},e),{},{classes:[].concat(Object(X.a)(e.classes),[t.payload])});case y:return Object(x.a)(Object(x.a)({},e),{},{user:t.payload});default:return e}}),K(Object(z.a)(W.a)));a.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(R.a,{store:Q,children:Object(O.jsx)(J,{})})}),document.getElementById("root"))},89:function(e,t){e.exports={RoleToString:function(e){return 1===(e=parseInt(e))?"Manager":"Employee"},StatusToString:function(e){switch(e=parseInt(e)){case 1:return"Approved";case 2:return"Denied";default:return"Pending"}},TypeToString:function(e){switch(e=parseInt(e)){case 1:return"Lodging";case 2:return"Travel";case 3:return"Food";default:return"Other"}}}},96:function(e,t,r){},97:function(e,t,r){}},[[221,1,2]]]);
//# sourceMappingURL=main.4b231ef8.chunk.js.map